package code.blurone.snifferexploited.commands

import code.blurone.snifferexploited.PotionOfSniffing
import org.bukkit.command.Command
import org.bukkit.command.CommandSender
import org.bukkit.command.TabExecutor
import org.bukkit.entity.Entity
import org.bukkit.inventory.ItemStack

class PotionCommandExecutor : TabExecutor {

    override fun onCommand(
        sender: CommandSender,
        command: Command,
        label: String,
        args: Array<out String>
    ): Boolean {
        if (args.size > 1)
            return false

        val item: ItemStack = if (args.isEmpty())
            PotionOfSniffing.createPotion()
        else
            PotionOfSniffing.createPotion(args[0])

        if (sender is Entity)
            sender.world.dropItem(sender.location, item)
        else
            sender.sendMessage("You must be an entity to use this command")

        return true
    }

    override fun onTabComplete(
        sender: CommandSender,
        command: Command,
        label: String,
        args: Array<out String>
    ): MutableList<String> {
        return if (args.size == 1)
            mutableListOf("potion", "splash", "lingering")
        else
            mutableListOf()
    }
}